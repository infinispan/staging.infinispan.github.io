<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.2.0">Jekyll</generator><link href="https://infinispan.org/feed.xml" rel="self" type="application/atom+xml" /><link href="https://infinispan.org/" rel="alternate" type="text/html" /><updated>2024-03-23T02:51:06-04:00</updated><id>https://infinispan.org/feed.xml</id><title type="html">Infinispan</title><subtitle>Infinispan is a distributed in-memory key/value data store with optional schema, available under the Apache License 2.0.</subtitle><entry><title type="html">Infinispan Operator 2.4.0</title><link href="https://infinispan.org/blog/2024/03/19/infinispan-resp-resque-use-case" rel="alternate" type="text/html" title="Infinispan Operator 2.4.0" /><published>2024-03-19T20:00:00-04:00</published><updated>2024-03-19T20:00:00-04:00</updated><id>https://infinispan.org/blog/2024/03/19/infinispan-operator-2-4-0-release</id><content type="html" xml:base="https://infinispan.org/blog/2024/03/19/infinispan-resp-resque-use-case">&lt;div id=&quot;preamble&quot;&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;We&amp;#8217;re pleased to announce
&lt;a href=&quot;https://operatorhub.io/operator/infinispan/stable/infinispan-operator.v2.4.0&quot;&gt;version 2.4.0 of the Infinispan Operator&lt;/a&gt;
for Kubernetes and Red Hat OpenShift.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;This is the first Operator release based on Infinispan 15.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;release-highlights&quot;&gt;Release highlights:&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Infinispan 14.0.27.Final support&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Infinispan 15.0.0.Final support&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Allow Readiness, Liveness and Startup probe values to be configured&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Simplify JGroups configuration to use &quot;Kubernetes&quot; stack provided by Infinispan server&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;CloudEvents integration no longer has any effect with 15.0.x servers onwards&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Cross-Site Replication (XSite) improvements:&lt;/p&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Use TLSv1.3 as default&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;TLS client authentication by default&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Configure Gossip Route idle connection timeout&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;operatorhub-channel&quot;&gt;OperatorHub Channel&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;From this release onwards all Infinispan Operator releases will be added to the &quot;stable&quot; channel. Please transition from
the &quot;2.3.x&quot; Subscription channel to &quot;stable&quot; in order to consume 2.4.0.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Our intention is to continue our current versioning scheme, whereby the Operator minor version is incremented when support
for a new Infinispan major version is added. However, to simplify upgrades, all future Operator releases will be added to
the &quot;stable&quot; channel, instead of &lt;code&gt;x.y.z&lt;/code&gt;, so that it&amp;#8217;s no longer necessary for the Subscription channel to be changed when
upgrading.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;infinispan-server-support&quot;&gt;Infinispan Server Support&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Future 2.4.x Operator releases will include the latest releases for both the 15.0.x and 14.0.x Infinispan server streams.
While we always recommend users to transition to the latest Infinispan major version as soon as possible, supporting both
server streams in the Operator will provided additional flexibility those depending on Infinispan as part of a 3rd party
integration, e.g. Keycloak users.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</content><author><name>Ryan Emerson</name></author><category term="release" /><category term="operator" /><category term="kubernetes" /><summary type="html">We&amp;#8217;re pleased to announce version 2.4.0 of the Infinispan Operator for Kubernetes and Red Hat OpenShift.</summary></entry><entry><title type="html">Infinispan 15.0.0.Final</title><link href="https://infinispan.org/blog/2024/03/12/infinispan-15" rel="alternate" type="text/html" title="Infinispan 15.0.0.Final" /><published>2024-03-12T20:00:00-04:00</published><updated>2024-03-12T20:00:00-04:00</updated><id>https://infinispan.org/blog/2024/03/12/infinispan-15.0.0.Final</id><content type="html" xml:base="https://infinispan.org/blog/2024/03/12/infinispan-15">&lt;div id=&quot;preamble&quot;&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Don&amp;#8217;t you know I&amp;#8217;m still standin&apos; better than I ever did?
Lookin&apos; like a true survivor, feelin&apos; like a little kid&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Those lyrics certainly apply to our newest, and best, release: Infinispan 15, which continues to improve on its mature foundation, and yet packs fun new features, just like a little kid.
And in our grand tradition of codenames based on beers, this one &lt;a href=&quot;https://untappd.com/b/delphic-brewing-company-i-m-still-standing/3572608&quot;&gt;is no exception&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;img src=&quot;/assets/images/blog/im-still-standing.jpg&quot; alt=&quot;I&amp;#8217;m Still Standing&quot; width=&quot;1000&quot; height=&quot;891&quot;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;jdk-requirements&quot;&gt;JDK requirements&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;You will need at least JDK 17 in order to use Infinispan 15. Infinispan also supports JDK 21 and the soon-to-be-released JDK 22.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;jakarta-ee&quot;&gt;Jakarta EE&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Since we&amp;#8217;ve completely embraced JDK 17, we now only ship &lt;a href=&quot;https://jakarta.ee&quot;&gt;Jakarta EE&lt;/a&gt;-compatible modules. If you want to keep on using Java EE, you will have to stay
on Infinispan 14, which is still supported.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;redis-protocol&quot;&gt;Redis protocol&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Infinispan Server now comes with a Redis protocol (RESP) connector. We implement over 90 commands from Redis OSS, including most data types (strings, sets, sorted sets, lists, hashes, pubsub). Why would you want to use Infinispan instead of Redis ? Just some things:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;multi-threaded: take advantage of multiple cores without resorting to clustering&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;P2P clustering: all members of a cluster are of the same kind. You don’t need to worry about writing to masters, reading from replicas: it’s all the same! Elastically add/remove nodes at runtime to increase/decrease capacity as required by your workload: Infinispan will rebalance the data to ensure that your redundancy settings are respected.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;multiple caches with dedicated configuration: divide your data in different namespaces, possibly with different expiration, eviction, persistence rules. And it also works in a cluster, unlike Redis Cluster.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;cross-site replication: work with 2 or more sites&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;multiple persistence options: store your data on disk, in a database or in another external store. You can even write your own to implement true inline caching instead of side-caching to reduce your overall latency.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;integration with external identity providers: authenticate/authorize with OAuth2, LDAP, Kerberos, client certificates.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;full pipeline inbound process handling allows for even greater batched throughput&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;a mature, open-source Kubernetes Operator which supports provisioning, scaling, persistence, and integration with enterprise security.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;lots more!&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;and everything is available under the ASL 2.0, so you don’t have to worry about features being locked behind restrictive licenses.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;The Redis connector is exposed via our single-port: we automatically detect RESP clients on connection!&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;We even made a &lt;a href=&quot;https://www.youtube.com/watch?v=Xi9gTA0jfD0&quot;&gt;video&lt;/a&gt; highlighting some cool things!&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;vector-indexes&quot;&gt;Vector indexes&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Infinispan now supports distributed vector indexes and KNN queries.
They are expressed in Ickle (SQL-like) syntax using the special operator &lt;code&gt;&amp;lt;&amp;#8594;&lt;/code&gt;. For instance:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlightjs highlight&quot;&gt;&lt;code class=&quot;language-java hljs&quot; data-lang=&quot;java&quot;&gt;Query&amp;lt;Item&amp;gt; query = cache.query(&quot;from Item i where i.byteVector &amp;lt;-&amp;gt; [7,6,7]~3&quot;);&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Vector parameters can be passed in different ways.
As an entire entity:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlightjs highlight&quot;&gt;&lt;code class=&quot;language-java hljs&quot; data-lang=&quot;java&quot;&gt;query = cache.query(&quot;from model.Item i where i.byteVector &amp;lt;-&amp;gt; [:a]~:b&quot;);
query.setParameter(&quot;a&quot;, new byte[]{7, 6, 7});
query.setParameter(&quot;b&quot;, 3);&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Or using a placeholder for each cell:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlightjs highlight&quot;&gt;&lt;code class=&quot;language-java hljs&quot; data-lang=&quot;java&quot;&gt;query = cache.query(&quot;from model.Item i where i.floatVector &amp;lt;-&amp;gt; [:a,:b,:c]~:d&quot;);
query.setParameter(&quot;a&quot;, 1);
query.setParameter(&quot;b&quot;, 4.3);
query.setParameter(&quot;c&quot;, 3.3);
query.setParameter(&quot;d&quot;, 4);&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Both float vectors and byte vectors are supported.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Infinispan can be easily integrated into a Python Langchain application as a vector store for semantic search or even in a chain: the picture below shows a QA chain in action.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;img src=&quot;/assets/images/blog/vector-search-relnotes.gif&quot; alt=&quot;Infinispan VectorStore&quot; width=&quot;640&quot; height=&quot;480&quot;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;See &lt;a href=&quot;https://python.langchain.com/docs/integrations/vectorstores/infinispanvs&quot;&gt;Infinispan VectorStore&lt;/a&gt; and &lt;a href=&quot;https://github.com/infinispan-demos/infinispan-langchain-demo&quot;&gt;Infinispan Langchain demo&lt;/a&gt; for more examples.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Infinispan is also part of &lt;a href=&quot;https://github.com/langchain4j/langchain4j&quot;&gt;Langchain4j&lt;/a&gt;, thus the &lt;a href=&quot;https://docs.quarkiverse.io/quarkus-langchain4j/dev/infinispan-store.html&quot;&gt;Quarkus Langchain4j&lt;/a&gt; quarkiverse extension.
It can be used as an &lt;a href=&quot;https://docs.langchain4j.dev/integrations/embedding-stores/infinispan&quot;&gt;embedding store&lt;/a&gt; thanks to the support added to vector search.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;query&quot;&gt;Query&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;We finally made it easy to execute queries directly from the cache API, instead of having to go through the Search/QueryFactory combination:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlightjs highlight&quot;&gt;&lt;code class=&quot;language-java hljs&quot; data-lang=&quot;java&quot;&gt;Query&amp;lt;Image&amp;gt; query = cache.query(&quot;from play.image where moment between :from and :to order by moment desc&quot;);
query.setParameter(&quot;from&quot;, fromDate);
query.setParameter(&quot;to&quot;, toDate);&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;The query result object evolved to provide accurate information about the hit count.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlightjs highlight&quot;&gt;&lt;code class=&quot;language-java hljs&quot; data-lang=&quot;java&quot;&gt;QueryResult&amp;lt;Game&amp;gt; result = query.execute();
HitCount hitCount = result.count();
hitCount.value() // returns the value
hitCount.isExact() // returns the accuracy&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Moreover, hit count accuracy can be configured both globally and for each query execution to improve the performance of the queries.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;the efficiency of the #list query method has been improved.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;High-performance indexed count aggregation queries are now supported.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;More projections kinds have been added:&lt;/p&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Score&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Version&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Star/Identity&lt;/p&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;and they are now available also using the REST query APIs.&lt;/p&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;BigDecimal and BigInteger types are now supported on the ickle queries.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;index sharding is now configurable.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;indexing can be now configured in manual mode.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;index statistics now also contain the faults.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;the index engine is now called in a non-blocking fashion.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;tracing&quot;&gt;Tracing&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;The tracing subsystem configuration was greatly improved. Tracing can be configured both globally:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlightjs highlight&quot;&gt;&lt;code class=&quot;language-xml hljs&quot; data-lang=&quot;xml&quot;&gt;&amp;lt;cache-container name=&quot;default&quot;&amp;gt;
      &amp;lt;tracing collector-endpoint=&quot;${infinispan.tracing.collector-endpoint}&quot; security=”true” /&amp;gt;
&amp;lt;/cache-container&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;and per-cache:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlightjs highlight&quot;&gt;&lt;code class=&quot;language-yaml hljs&quot; data-lang=&quot;yaml&quot;&gt;tracing:
    enabled: true
    categories:
      - &quot;container&quot;
      - &quot;cluster&quot;
      - &quot;persistence&quot;
      - “x-site”&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Moreover, many more things can be traced:
* cluster calls
* cross-site calls
* persistence operations
* security audit operations&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;All of the aboive, with the only exception of the security tracing, can be enabled / disabled at runtime.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;The following is a trace going from client application to the server via Hot Rod, involving a call to a persistent store;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/tracing15-1.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/thumb-tracing15-1.png&quot; alt=&quot;Tracing #1&quot; width=&quot;550&quot; height=&quot;107&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/tracing15-2.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/thumb-tracing15-2.png&quot; alt=&quot;Tracing #2&quot; width=&quot;550&quot; height=&quot;101&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;console&quot;&gt;Console&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;List  the connected clients from the console.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/console15-1.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/thumb-console15-1.png&quot; alt=&quot;Console #1&quot; width=&quot;550&quot; height=&quot;291&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Manage roles, users and access control for Principal Role Mappers from the console.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/console15-2.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/thumb-console15-2.png&quot; alt=&quot;Console #1&quot; width=&quot;550&quot; height=&quot;302&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Infinispan Server web console can be switched to dark mode.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/console15-3.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/thumb-console15-3.png&quot; alt=&quot;Console #3&quot; width=&quot;550&quot; height=&quot;286&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;core&quot;&gt;Core&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Many of the core optimizations have been around optimizing intra-cluster communications, especially around previous values that were identified being returned when they are not needed. This ensures Infinispan only sends the cache value around only in the case of put operations, reducing those payloads substantially.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;sect2&quot;&gt;
&lt;h3 id=&quot;remove-operations-behavior-change&quot;&gt;Remove Operations behavior change&lt;/h3&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Remove operations on a non tx cache will no longer generate intra-cluster traffic if no value is present. Cross sit removes are still always replicated due to not knowing if the other site has the key or not. Stores may load the key to see if it is present to invoke a remove or not, depending on the cache configuration.
This also may prevent some listeners from receiving remove notifications, since the operation is not replicated.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect2&quot;&gt;
&lt;h3 id=&quot;writes-on-backup-nodes-do-not-retrieve-previous-value&quot;&gt;Writes on Backup Nodes do not retrieve previous value&lt;/h3&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Internally write operations would be performed on backup nodes returning the previous value to the primary owner. There is no need for this and as such we have optimized intra cluster communication to no longer return this value.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect2&quot;&gt;
&lt;h3 id=&quot;converter-listener-can-ignore-old-value&quot;&gt;Converter Listener can ignore old value&lt;/h3&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Listener converters can override a new method includeOldValue. This allows for a converter to not send an old value along in a change event, reducing payload size of such events. This is useful for events where they only utilize the new value. Link to the source.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;An example of a converter that just appends the new value and lifespan as the value for the listener.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlightjs highlight&quot;&gt;&lt;code class=&quot;language-java hljs&quot; data-lang=&quot;java&quot;&gt;   @ProtoName(&quot;StringAppender&quot;)
   public static class StringAppender implements CacheEventConverter&amp;lt;Object, String, String&amp;gt; {
      @Override
      public String convert(Object key, String oldValue, Metadata oldMetadata, String newValue, Metadata newMetadata, EventType eventType) {
         return oldValue + (oldMetadata != null ? oldMetadata.lifespan() : &quot;null&quot;) + newValue + (newMetadata != null ? newMetadata.lifespan() : &quot;null&quot;);
      }

      /**
       * Whether the old value should be returned in the event with the converted value.
        */
      @Override
      public boolean includeOldValue() {
         return false;
      }
   }&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;marshalling&quot;&gt;Marshalling&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Our ProtoStream library, which handles annotation-based generation of Protocol Buffers marshallers, has been updated to finally support the proto3 syntax, including the &lt;code&gt;map&lt;/code&gt; type. ProtoStream can now generate marshallers for Java &lt;code&gt;records&lt;/code&gt;, as well as introducing a new annotation &lt;code&gt;@Proto&lt;/code&gt; which makes life much simpler:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlightjs highlight&quot;&gt;&lt;code class=&quot;language-java hljs&quot; data-lang=&quot;java&quot;&gt;@Proto
@Indexed
public record Book(
    @Text String title,
    @Keyword(projectable = true, sortable = true, normalizer = &quot;lowercase&quot;, indexNullAs = &quot;unnamed&quot;, norms = false) String description,
    int publicationYear,
    Set&amp;lt;Author&amp;gt; authors,
    Type bookType,
    BigDecimal price
) { }&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;ProtoStream’s programmatic API has also received some love: you can now generate schemas from your code, and you can easily implement hand-written marshallers in case the annotation-based magic doesn’t work for you.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlightjs highlight&quot;&gt;&lt;code class=&quot;language-java hljs&quot; data-lang=&quot;java&quot;&gt;Schema schema = new Schema.Builder(&quot;magazine.proto&quot;)
    .packageName(&quot;magazine_sample&quot;)
    .addMessage(&quot;Magazine&quot;)
        .addField(Type.Scalar.STRING, &quot;name&quot;, 1)
        .addField(Type.Scalar.INT32, &quot;publicationYear&quot;, 2)
        .addField(Type.Scalar.INT32, &quot;publicationMonth&quot;, 3)
        .addRepeatedField(Type.Scalar.STRING, &quot;stories&quot;, 4)
    .build();

FileDescriptorSource file = FileDescriptorSource.fromString(&quot;magazine.proto&quot;, schema.toString());&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;By popular demand, we have also undeprecated the use of JBoss Marshalling, although we still highly recommend ProtoBuf for interoperability and performance.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;memcached-protocol&quot;&gt;Memcached protocol&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;We upgraded our memcached connector to support the binary protocol as well as supporting authentication and encryption for both the text and binary variants. Because of this, the connector is also exposed via our single-port, with protocol auto-detection! While we do not yet support the Memcached meta commands, text-based authentication can be performed by sending a fake &lt;code&gt;set`&lt;/code&gt; command with any key:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlightjs highlight&quot;&gt;&lt;code class=&quot;language-none hljs&quot;&gt;set &amp;lt;key&amp;gt; &amp;lt;flags&amp;gt; &amp;lt;exptime&amp;gt; &amp;lt;bytes&amp;gt;\r\n
username password\r\n&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;server&quot;&gt;Server&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Server security has been expanded with the new &lt;code&gt;aggregate-realm&lt;/code&gt; type, which allows you to combine different realm types for authentication and authorization. For example, you could use client certificates for authentication and an LDAP server to perform authorization:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlightjs highlight&quot;&gt;&lt;code class=&quot;language-xml hljs&quot; data-lang=&quot;xml&quot;&gt;&amp;lt;server xmlns=&quot;urn:infinispan:server:15.0&quot;&amp;gt;
   &amp;lt;security&amp;gt;
       &amp;lt;security-realms&amp;gt;
           &amp;lt;security-realm name=&quot;default&quot; default-realm=&quot;aggregate&quot;&amp;gt;
               &amp;lt;server-identities&amp;gt;
                   &amp;lt;ssl&amp;gt;
                       &amp;lt;keystore path=&quot;server.pfx&quot; password=&quot;secret&quot; alias=&quot;server&quot;/&amp;gt;
                       &amp;lt;truststore path=&quot;trust.pfx&quot; password=&quot;secret&quot;/&amp;gt;
                   &amp;lt;/ssl&amp;gt;
               &amp;lt;/server-identities&amp;gt;
               &amp;lt;properties-realm groups-attribute=&quot;Roles&quot;&amp;gt;
                   &amp;lt;user-properties path=&quot;users.properties&quot; relative-to=&quot;infinispan.server.config.path&quot;/&amp;gt;
                   &amp;lt;group-properties path=&quot;groups.properties&quot; relative-to=&quot;infinispan.server.config.path&quot;/&amp;gt;
               &amp;lt;/properties-realm&amp;gt;
               &amp;lt;truststore-realm/&amp;gt;
               &amp;lt;aggregate-realm authentication-realm=&quot;trust&quot; authorization-realms=&quot;properties&quot;&amp;gt;
                   &amp;lt;name-rewriter&amp;gt;
                       &amp;lt;common-name-principal-transformer/&amp;gt;
                   &amp;lt;/name-rewriter&amp;gt;
               &amp;lt;/aggregate-realm&amp;gt;
           &amp;lt;/security-realm&amp;gt;
       &amp;lt;/security-realms&amp;gt;
   &amp;lt;/security&amp;gt;
&amp;lt;/server&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;persistence&quot;&gt;Persistence&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Along with the sub changes below we also have optimized persistent entries that do not have expiration or other custom metadata, reducing marshalled byte size by approximately 40 bytes per entry.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;sect2&quot;&gt;
&lt;h3 id=&quot;soft-index-file-store&quot;&gt;Soft-Index File Store&lt;/h3&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;The underlying index for the Soft Index File Store has been completely revamped to no longer utilize a different set of “segments” for its index. Instead it splits its index into a number equal to the caches configured segments (ie. cache &amp;#8594; clustering &amp;#8594; hash &amp;#8594; number of segments). The “index segments” configuration is now deprecated and ignored.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;This change allows for more efficient segment based operations.
Iteration within a subset of segments now only needs to read a single file instead of multiple.
Cache rebalance with DIST is now orders of magnitude faster as it just drops a single index
Key lookup is also now slightly faster (on average 4 less hash comparisons)&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Index files now also utilize a portion of the open files limit to prevent possibility of file descriptor exhaustion. By default the index will use up to 10% of the file limit to keep files open, closing as needed.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect2&quot;&gt;
&lt;h3 id=&quot;passivation&quot;&gt;Passivation&lt;/h3&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Passivation has been changed to be less chatty. Originally passivation required contents to only be in memory or in the store. This has been found to generate too many write operations to the underlying store. Instead now it is permitted that a value be stale in the store when it is present in memory. This prevents many remove operations from being generated. Upon shutdown or if the entry is evicted from memory only then will the store be updated with the proper value.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;With a clean shutdown there will be no data inconsistency with a restart. It should be noted that if the node crashes without proper shutdown the cache may have a stale value (new behavior) instead of no value (previous behavior) for values that were in memory.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;operator&quot;&gt;Operator&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Configure Readiness, Liveness and Startup probe values&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Expose JMX endpoint&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Configuration of StatefulSet PriorityClass&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Allow users to define credential-store entries&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ConfigListener configure CPU and Memory resources&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Make cross-site failure detection configurable&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Use TLSv1.3 as default for Xsite&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Xsite GossipRouter improvements&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Allow setting the CPU and Memory resources&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Added and enabled heartbeats by default&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Disabled suspect events by default&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;TLS client authentication by default&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Increase the probe timeout&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;helm-charts&quot;&gt;Helm charts&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Add ability to define custom environment variables&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Add ability to set tolerations&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Add support for node affinity and node selectors&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Allow the user to specify container securityContext&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Allow TLS configuration on endpoints&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Allow TLS configuration on JGroups transport&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;graalvm&quot;&gt;GraalVM&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;In addition to our various Quarkus integrations, Infinispan now provides the &lt;code&gt;infinispan-client-hotrod-graalvm&lt;/code&gt; and &lt;code&gt;infinispan-core-graalvm&lt;/code&gt; modules. These modules enable you to build native Hot Rod clients and Embedded Infinispan applications natively with GraalVM, allowing integration with other frameworks such as Spring Broot.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;security-manager&quot;&gt;Security Manager&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;We have completely removed support for the Java Security Manager, since it has been deprecated for removal in the JDK. It was designed mostly for sandboxing Java applets, but it was somehow (wrongly) co-opted as a way to implement similar functionality for normal Java applications. It was slow and cumbersome, and we’re glad to see it go. The removal of SecurityManager support from Infinispan does not affect its authentication and authorization capabilities.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;integrations&quot;&gt;Integrations&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Our second-level cache component now supports Hibernate ORM 6.4&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;We have dropped CDI support from our JCache provider since the specification has not been updated for Jakarta EE&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;removals&quot;&gt;Removals&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Sadly, a couple of items have been removed, as we did not see much use in the wild: scattered caches and the cloud-events integration module. May they rest in peace.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;documentation&quot;&gt;Documentation&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Many improvements, updates and fixes.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;release-notes&quot;&gt;Release notes&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;You can look at the &lt;a href=&quot;https://issues.redhat.com/secure/ReleaseNote.jspa?projectId=12310799&amp;amp;version=12377084&quot;&gt;release notes&lt;/a&gt; to see what has changed since our latest CR.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Get them from our &lt;a href=&quot;https://infinispan.org/download/&quot;&gt;download page&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</content><author><name>Tristan Tarrant</name></author><category term="release" /><category term="final" /><summary type="html">Don&amp;#8217;t you know I&amp;#8217;m still standin&apos; better than I ever did? Lookin&apos; like a true survivor, feelin&apos; like a little kid</summary></entry><entry><title type="html">Using Infinispan Server for your Redis clients</title><link href="https://infinispan.org/blog/2024/02/01/infinispan-server-redis-clients" rel="alternate" type="text/html" title="Using Infinispan Server for your Redis clients" /><published>2024-02-01T19:00:00-05:00</published><updated>2024-02-01T19:00:00-05:00</updated><id>https://infinispan.org/blog/2024/02/01/infinispan-server-redis-clients</id><content type="html" xml:base="https://infinispan.org/blog/2024/02/01/infinispan-server-redis-clients">&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Dear Infinispan community,&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;we&amp;#8217;ve put together a video that shows how you can seamlessly connect your Redis clients to Infinispan Server, and take advantage of our advanced capabilities.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;videoblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;iframe width=&quot;640&quot; height=&quot;380&quot; src=&quot;https://www.youtube.com/embed/Xi9gTA0jfD0?rel=0&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;/div&gt;</content><author><name>Tristan Tarrant</name></author><category term="video" /><category term="demo" /><category term="redis" /><summary type="html">Dear Infinispan community,</summary></entry><entry><title type="html">Infinispan RESP in action: Resque use case</title><link href="https://infinispan.org/blog/2024/01/18/infinispan-resp-resque-use-case" rel="alternate" type="text/html" title="Infinispan RESP in action: Resque use case" /><published>2024-01-18T19:00:00-05:00</published><updated>2024-01-18T19:00:00-05:00</updated><id>https://infinispan.org/blog/2024/01/18/infinispan-resp-resque-use-case</id><content type="html" xml:base="https://infinispan.org/blog/2024/01/18/infinispan-resp-resque-use-case">&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;As you may know Infinispan 15 extended its RESP compatibility implementing most of the command related to the principal data types (set, list, hashes, sorted set&amp;#8230;&amp;#8203;).&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;In this post we want to present a demo case of integration between a real application (&lt;a href=&quot;https://github.com/resque/resque&quot;&gt;Resque&lt;/a&gt;) and Infinispan used as a Redis-compatible cache backend.&lt;br&gt;
Aim of this is to show how it&amp;#8217;s easy to switch between Redis and Infinispan making available to your application all the advanced features of our clustered cache server.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Resque is a job scheduler that creates jobs and send them to execution queues, it uses Redis as default backend and provides a testsuite and a demo application.&lt;br&gt;
Try yourself how Infinispan can seamlessly replace the default backend: just clone
&lt;a href=&quot;https://github.com/rigazilla/resque/tree/ispn-testsuite&quot;&gt;this Resque fork&lt;/a&gt; and follow the &lt;a href=&quot;https://github.com/rigazilla/resque/blob/ispn-testsuite/README.ispn.md&quot;&gt;Infinispan README&lt;/a&gt; to run both the test suite and the demo application.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Everything worked as a charm? Nice! Now check the diff with the original project, we only added code to turn on/off Infinispan instead of Redis. Nothing more than that! (*)&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Hope you ejoyed this post!&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Cheers,&lt;br&gt;
The Infinispan Team&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;(*) What? You also noticed we changed the expected result for a test. Surely you can easily guess why&amp;#8230;&amp;#8203; if not just ask us on &lt;a href=&quot;https://infinispan.zulipchat.com/#&quot;&gt;Zulip&lt;/a&gt;!&lt;/p&gt;
&lt;/div&gt;</content><author><name>Vittorio Rigamonti</name></author><category term="demo" /><category term="use case" /><category term="resp" /><category term="redis" /><summary type="html">As you may know Infinispan 15 extended its RESP compatibility implementing most of the command related to the principal data types (set, list, hashes, sorted set&amp;#8230;&amp;#8203;).</summary></entry><entry><title type="html">Infinispan Insights: Securing Infinispan with Keycloak</title><link href="https://infinispan.org/blog/2024/01/08/securing-infinispan-with-keycloak" rel="alternate" type="text/html" title="Infinispan Insights: Securing Infinispan with Keycloak" /><published>2024-01-08T19:00:00-05:00</published><updated>2024-01-08T19:00:00-05:00</updated><id>https://infinispan.org/blog/2024/01/08/infinispan-security-keycloak</id><content type="html" xml:base="https://infinispan.org/blog/2024/01/08/securing-infinispan-with-keycloak">&lt;div id=&quot;preamble&quot;&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;This tutorial shows you how to secure your Infinispan cluster using Keycloak.
To understand the basics of Infinispan Security, check
&lt;a href=&quot;https://infinispan.org/blog/2023/12/19/infinispan-secured-caches&quot;&gt;this blog post&lt;/a&gt; before.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;&lt;strong&gt;Key Points:&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Learn how to create a security realm in Keycloak.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Override the default security realm in Infinispan.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Authentication and authorization in Infinispan with Keycloak.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;infinispan-and-keycloak-in-a-nutshell&quot;&gt;Infinispan and Keycloak in a nutshell&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;about-infinispan&quot;&gt;About Infinispan&lt;/h4&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Infinispan is an open-source, in-memory distributed key/value data store. It is designed to provide fast
and scalable access to frequently accessed data by storing it in memory. In addition to caching,
Infinispan offers features for data distribution, replication, and partitioning, making it suitable
for use in distributed and clustered environments.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Infinispan is often used in scenarios where low-latency access to data is critical, such as caching
frequently accessed database queries, session data in web applications, or other
use cases where quick access to data can improve overall system performance&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;about-keycloak&quot;&gt;About Keycloak&lt;/h4&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://www.keycloak.org/&quot;&gt;Keycloak&lt;/a&gt; is an open-source identity and access management solution developed by Red Hat.
It provides functionalities for identity and access management, including features like single sign-on (SSO),
user authentication, authorization, and user federation. Keycloak is designed to simplify the implementation
of security protocols and standards such as OAuth 2.0, OpenID Connect, and SAML.
Some key features include Single Sign-On (SSO), Identity Brokering, User Authentication,
User Federation, RBAC and more.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;infinispan-and-keycloak&quot;&gt;Infinispan and Keycloak&lt;/h4&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Keycloak uses Infinispan as its underlying data store for caching and storage purposes.
Infinispan provides  scalable and efficient caching of authentication and authorization-related data.
This helps improve performance and responsiveness, especially in scenarios where quick access to user
session information and other identity-related data is crucial.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Some ways &lt;strong&gt;Keycloak leverages Infinispan&lt;/strong&gt; include Caching User Sessions, storing Authorization policies,
providing distributed caching, improving performance, &lt;a href=&quot;https://www.keycloak.org/2023/12/recover-site-failures&quot;&gt;failover recovering&lt;/a&gt;
and more.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;what-about-infinispan-leveraging-keycloak&quot;&gt;What about Infinispan leveraging Keycloak ?&lt;/h4&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Infinispan provides several ways to handle authentication and user management.
By default, the security realm is properties based. However, token based authentication is supported
and Keycloak can be used for that purpose.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;creating-a-security-realm-in-keycloak&quot;&gt;Creating a Security Realm in Keycloak&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;sect2&quot;&gt;
&lt;h3 id=&quot;run-keycloak-in-dev-mode&quot;&gt;Run Keycloak in dev mode&lt;/h3&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;The easiest way to use Keycloak on your laptop is in a container using the development mode.
Because we&amp;#8217;re going to run Keycloak in one container and Infinispan in another, let&amp;#8217;s set up
a network to connect them.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;For Linux users, there&amp;#8217;s an option called &lt;strong&gt;network_mode: host&lt;/strong&gt; that might be available
to you instead of using a network bridge. However, since this option doesn&amp;#8217;t work for
Mac or Windows currently, we&amp;#8217;ll focus on the method that suits all operating systems.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlightjs highlight&quot;&gt;&lt;code class=&quot;language-bash hljs&quot; data-lang=&quot;bash&quot;&gt;docker network create -d bridge mynetwork
docker run -p 8080:8080 --network=mynetwork --name=keycloak -e KEYCLOAK_ADMIN=keycloak -e KEYCLOAK_ADMIN_PASSWORD=keycloak quay.io/keycloak/keycloak:latest start-dev&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Keycloak Image will create an administrator user by defining the KEYCLOAK_ADMIN and KEYCLOAK_ADMIN_PASSWORD
environment variables.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;After getting the container up and running, go to &lt;a href=&quot;http://localhost:8080&quot;&gt;http://localhost:8080&lt;/a&gt;
Click on the Administration Console link, and log in using the credentials &lt;strong&gt;&quot;keycloak/keycloak&quot;&lt;/strong&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/adminKeycloak.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/adminKeycloak.png&quot; alt=&quot;Admin Keycloak&quot; width=&quot;800&quot; height=&quot;316&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect2&quot;&gt;
&lt;h3 id=&quot;create-a-realm&quot;&gt;Create a realm&lt;/h3&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Keycloak realms are a fundamental concept in Keycloak. Realms in Keycloak serve as a way to
isolate and manage different sets of users, applications, and their associated configurations.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Using the web administration tool, create a new realm called &lt;strong&gt;&quot;Infinispan&quot;&lt;/strong&gt;.
This realm is what the Infinispan Server will use in the later steps of this tutorial.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/createRealmKeycloak.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/createRealmKeycloak.png&quot; alt=&quot;Keycloak create realm&quot; width=&quot;200&quot; height=&quot;192&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Name your realm &lt;strong&gt;“infinispan”&lt;/strong&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/infinispanRealmKeycloak.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/infinispanRealmKeycloak.png&quot; alt=&quot;Keycloak: realm name is infinispan&quot; width=&quot;800&quot; height=&quot;569&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect2&quot;&gt;
&lt;h3 id=&quot;create-the-infinispan-clients&quot;&gt;Create the Infinispan clients&lt;/h3&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Clients are entities that can request authentication of a user. Clients come in two forms.
The first type of client is an application that wants to participate in single-sign-on.
These clients just want Keycloak to provide security for them. The other type of client is one that
is requesting an access token so that it can invoke other services on behalf of the authenticated user.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;For the Infinispan Server and testing the Console security, we&amp;#8217;ll require two clients set up
in Keycloak: one named &lt;strong&gt;&quot;infinispan-console&quot;&lt;/strong&gt; and the other &lt;strong&gt;&quot;infinispan-server&quot;&lt;/strong&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;infinispan-console-client&quot;&gt;Infinispan Console Client&lt;/h4&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Create a Keycloak client named &lt;strong&gt;“infinispan-console”&lt;/strong&gt;. The Infinispan Web Console uses this client
to authenticate console users with Keycloak in order to obtain an authentication token. This token is
then used to authenticate all requests by the console to the Infinispan server.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/infinispan-client-stepOne.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/infinispan-client-stepOne.png&quot; alt=&quot;Keycloak: infinispan-console client step 1&quot; width=&quot;800&quot; height=&quot;377&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Configure the valid redirect URIs with Infinispan’s console URI: &lt;strong&gt;&lt;a href=&quot;http://localhost:11222&quot; class=&quot;bare&quot;&gt;http://localhost:11222&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/infinispan-client-stepTwo.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/infinispan-client-stepTwo.png&quot; alt=&quot;Keycloak: infinispan-console client step 2&quot; width=&quot;800&quot; height=&quot;503&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;This step is completed.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;infinispan-server-client&quot;&gt;Infinispan Server Client&lt;/h4&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Create a second client called &lt;strong&gt;&quot;infinispan-server&quot;&lt;/strong&gt;. Set &lt;strong&gt;&quot;client authentication&quot;&lt;/strong&gt; to &lt;strong&gt;&quot;ON&quot;&lt;/strong&gt;.
This defines the type of the OIDC client. When it&amp;#8217;s ON, the OIDC type is set to confidential
access type. When it&amp;#8217;s OFF, it is set to public access type (&quot;infinispan-console&quot; client type).&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/infinispan-server-client-stepTwo.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/infinispan-server-client-stepTwo.png&quot; alt=&quot;Keycloak: infinispan-server client step 2&quot; width=&quot;800&quot; height=&quot;368&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;This step is completed.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect2&quot;&gt;
&lt;h3 id=&quot;create-a-user&quot;&gt;Create a user&lt;/h3&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Once we have the two clients created, we need to create an admin user for Infinispan.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Click on the &lt;strong&gt;&quot;users&quot;&lt;/strong&gt; menu, and create a user named &lt;strong&gt;&quot;admin&quot;&lt;/strong&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/createAdminUser.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/createAdminUser.png&quot; alt=&quot;Keycloak: create admin&quot; width=&quot;800&quot; height=&quot;448&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Once the user admin is created, navigate to the user detail page.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/adminDetailKeycloak.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/adminDetailKeycloak.png&quot; alt=&quot;Keycloak: admin detail&quot; width=&quot;800&quot; height=&quot;575&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;In the credentials tab, create a password for the user, for example, &lt;strong&gt;&quot;adminPassword&quot;&lt;/strong&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/adminSetAPasswordKeycloak.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/adminSetAPasswordKeycloak.png&quot; alt=&quot;Keycloak: admin set password&quot; width=&quot;500&quot; height=&quot;273&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;We are now ready to run Infinispan.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;running-infinispan-secured-with-a-keycloak-realm&quot;&gt;Running Infinispan secured with a Keycloak realm&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;sect2&quot;&gt;
&lt;h3 id=&quot;create-the-infinispan-security-realm-configuration&quot;&gt;Create the Infinispan security realm configuration&lt;/h3&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;You can configure this in XML, JSON, or YAML. In the example provided below, the configuration
is in YAML format.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Create a file named &lt;strong&gt;infinispan-token-realm.yaml&lt;/strong&gt; with the following content.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;&lt;strong&gt;infinispan-token-realm.yaml&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre&gt;server:
 security:
   securityRealms:
     - name: default
       tokenRealm:
         name: infinispan
         authServerUrl: &apos;http://keycloak:8080&apos;
         client-id: infinispan-console
         oauth2Introspection:
           clientId: infinispan-server
           clientSecret: &apos;COPY AND PASTE THE SECRET FROM KEYCLOAK&apos;
           introspectionUrl: &apos;http://keycloak:8080/realms/infinispan/protocol/openid-connect/token/introspect&apos;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;We are not done yet!!&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Read the following sections to understand and &lt;strong&gt;change the placeholders&lt;/strong&gt; in the file.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;default-security-realm-name&quot;&gt;Default Security Realm name&lt;/h4&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;The security realm is named &lt;strong&gt;&quot;default&quot;&lt;/strong&gt;. This file is designed to replace the default security realm
in Infinispan, which is originally based on properties, with the configuration for this
token-based realm.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;client-secret&quot;&gt;Client Secret&lt;/h4&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Retrieve the secret for the &lt;strong&gt;&quot;infinispan-server&quot;&lt;/strong&gt; client from the Keycloak Administration,
and then paste the secret value into the file replacing &lt;strong&gt;&apos;COPY AND PASTE THE SECRET FROM KEYCLOAK&apos;&lt;/strong&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/grabSecretFromInfinispanServerClient.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/grabSecretFromInfinispanServerClient.png&quot; alt=&quot;Keycloak: grab secret&quot; width=&quot;800&quot; height=&quot;465&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;authentication-server-url-authserverurl&quot;&gt;Authentication Server URL - &lt;strong&gt;authServerUrl&lt;/strong&gt;&lt;/h4&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;The authentication server is Keycloak, and it&amp;#8217;s running at &lt;strong&gt;localhost:8080&lt;/strong&gt;. However, in the YAML
configuration above, we used &lt;strong&gt;&quot;keycloak&quot;&lt;/strong&gt; instead of &quot;localhost&quot; (the container name).
This adjustment is needed when running containers in a Docker network. The Infinispan Server
will be reaching out to the Keycloak Server inside the Docker environment. As mentioned earlier,
Linux users can use &quot;localhost&quot; with the &lt;strong&gt;network_mode: host&lt;/strong&gt; configuration.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect2&quot;&gt;
&lt;h3 id=&quot;run-the-infinispan-server-overriding-the-default-security-realm&quot;&gt;Run the Infinispan Server overriding the default security realm&lt;/h3&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Lets run Infinispan in a container providing the created security realm configuration.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlightjs highlight&quot;&gt;&lt;code class=&quot;language-bash hljs&quot; data-lang=&quot;bash&quot;&gt;docker run -it -p 11222:11222 -v $(pwd):/user-config
--network=mynetwork
--name=infinispan quay.io/infinispan/server:15.0
-c infinispan.xml
-c /user-config/infinispan-token-realm.yaml&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;The command:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Creates a volume &quot;user-config&quot;&lt;/strong&gt; in the current directory where we created the file &lt;code&gt;infinispan-token-realm.yaml&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Attaches the container to the network &quot;mynetwork&quot;&lt;/strong&gt; so Infinispan and Keycloak can connect&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Uses &lt;code&gt;-c&lt;/code&gt;&lt;/strong&gt;, which means the container is using the default configuration file, &lt;code&gt;infinispan.xml&lt;/code&gt;.
Yet, specifying another &lt;code&gt;-c&lt;/code&gt; file, it adds the content of &lt;code&gt;infinispan-token-realm.yaml&lt;/code&gt; to &lt;code&gt;infinispan.xml&lt;/code&gt;.
Since this file configures the default security realm, the original Infinispan default properties realm
will be replaced with the token-based realm.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect2&quot;&gt;
&lt;h3 id=&quot;verify-the-changes&quot;&gt;Verify the changes&lt;/h3&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Accessing the following URL provides the information used by the Infinispan Web console
to handle authentication.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;&lt;a href=&quot;http://localhost:11222/rest/v2/login?action=config&quot; class=&quot;bare&quot;&gt;http://localhost:11222/rest/v2/login?action=config&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlightjs highlight&quot;&gt;&lt;code class=&quot;language-json hljs&quot; data-lang=&quot;json&quot;&gt;{
   &quot;mode&quot;: &quot;OIDC&quot;,
   &quot;clientId&quot;: &quot;infinispan-console&quot;,
   &quot;ready&quot;: &quot;true&quot;,
   &quot;realm&quot;: &quot;infinispan&quot;,
   &quot;url&quot;: &quot;http://keycloak:8080&quot;
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;The Infinispan Console will use the information above, and making use of the
&lt;a href=&quot;https://www.keycloak.org/docs/latest/securing_apps/index.html#_javascript_adapter&quot;&gt;Keycloak Javascript Adapter&lt;/a&gt;,
the interface  will redirect to Keycloak for user authentication.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect2&quot;&gt;
&lt;h3 id=&quot;connect-to-the-console-with-the-admin-user&quot;&gt;Connect to the console with the admin user&lt;/h3&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Go the console web URL: &lt;a href=&quot;http://localhost:11222&quot; class=&quot;bare&quot;&gt;http://localhost:11222&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;this-site-cant-be-reached&quot;&gt;This site can’t be reached&lt;/h4&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;The console needs to access Keycloak from outside the container.
However, the realm configuration uses &lt;code&gt;keycloak&lt;/code&gt; host.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/siteNotReached.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/siteNotReached.png&quot; alt=&quot;Site not reached&quot; width=&quot;400&quot; height=&quot;263&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;To avoid this issue, the workaround is simple: add to the following line to the &lt;code&gt;/etc/hosts&lt;/code&gt; file:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre&gt; 127.0.0.1      keycloak&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;As mentioned before, If you are using linux you can avoid this by using localhost and running
both containers with network_mode: host.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;authenticate-using-keycloak&quot;&gt;Authenticate using Keycloak&lt;/h4&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;When opening the Infinispan Console, Infinispan will attempt to make a call to a REST API
that requires authentication. You&amp;#8217;ll be redirected to the Keycloak authentication, where you
should use the credentials &lt;strong&gt;admin/adminPassword&lt;/strong&gt;. When you initially connect as admin,
you&amp;#8217;ll be prompted to change the password. For this example, you can stick with &quot;adminPassword&quot;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/authenticateUsingKeycloak.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/authenticateUsingKeycloak.png&quot; alt=&quot;Infinispan: authenticate with Keycloak&quot; width=&quot;400&quot; height=&quot;258&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;After Keycloak redirects back to the Infinispan Console, you can verify that admin is authenticated.
However, you will encounter Unauthorized errors in the console interface, since the connected
user’s roles are not known by Infinispan.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/adminIsNotAnAdmin.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/adminIsNotAnAdmin.png&quot; alt=&quot;Admin has not admin role&quot; width=&quot;800&quot; height=&quot;264&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect2&quot;&gt;
&lt;h3 id=&quot;create-and-assign-infinispan-admin-role&quot;&gt;Create and assign Infinispan ADMIN role&lt;/h3&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;To grant complete access to the admin user, it&amp;#8217;s necessary to create a role named &lt;strong&gt;&quot;admin&quot;&lt;/strong&gt;
and assign that role to the user in Keycloak.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;create-the-admin-role-in-keycloak&quot;&gt;Create the ADMIN role in Keycloak&lt;/h4&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Open the Keycloak administration interface, click on &quot;Roles&quot;, and then create a role with the name
&quot;admin&quot;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/createRoleAdminKeycloak.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/createRoleAdminKeycloak.png&quot; alt=&quot;Keycloak: create admin role&quot; width=&quot;800&quot; height=&quot;285&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;assign-the-admin-role-in-keycloak&quot;&gt;Assign the ADMIN role in Keycloak&lt;/h4&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;In the admin user detail page, go to the Role Mapping tab and assign the previously created
&quot;admin&quot; role there.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/asignAdminRoleToAdminUser.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/asignAdminRoleToAdminUser.png&quot; alt=&quot;Keycloak: assign admin role to admin user&quot; width=&quot;800&quot; height=&quot;361&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Return to the Infinispan Console, and you&amp;#8217;ll notice that the admin user is now granted the
admin role in Infinispan as well.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/adminIsGranted.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/2024-01-09-infinispan-secured-keycloak/adminIsGranted.png&quot; alt=&quot;Infinispan: admin is granted&quot; width=&quot;800&quot; height=&quot;440&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect2&quot;&gt;
&lt;h3 id=&quot;to-go-further&quot;&gt;To go further&lt;/h3&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;In the &lt;a href=&quot;https://infinispan.org/tutorials/simple/simple_tutorials.html#secured_with_token_keycloak_remote-cache-tutorials&quot;&gt;Infinispan Simple tutorials&lt;/a&gt;
repository you will find an example with docker-compose, for Linux and non linux users.
There are many other advanced features in Keycloak, this is just the most simple use case.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Learn more about it in the Keycloak and Infinispan documentation.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</content><author><name>Katia Aresti</name></author><category term="tutorial" /><category term="security" /><category term="rbac" /><category term="authentication" /><category term="keycloak" /><summary type="html">This tutorial shows you how to secure your Infinispan cluster using Keycloak. To understand the basics of Infinispan Security, check this blog post before.</summary></entry><entry><title type="html">Infinispan Insights: Security basics and secured caches</title><link href="https://infinispan.org/blog/2023/12/19/infinispan-secured-caches" rel="alternate" type="text/html" title="Infinispan Insights: Security basics and secured caches" /><published>2023-12-19T19:00:00-05:00</published><updated>2023-12-19T19:00:00-05:00</updated><id>https://infinispan.org/blog/2023/12/19/infinispan-secured-caches</id><content type="html" xml:base="https://infinispan.org/blog/2023/12/19/infinispan-secured-caches">&lt;div id=&quot;preamble&quot;&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;This article shows you how to secure your Infinispan cluster, protecting both cluster management and data
access in various Infinispan caches&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;&lt;strong&gt;Key Points:&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Learn how default authentication works in Infinispan&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Explore how authorization works in Infinispan.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Understand the basics of creating secure caches in a straightforward way with Infinispan.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;security-in-a-nutshell&quot;&gt;Security in a nutshell&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;When we talk about security, there are two main things to consider: proving who you are (authentication) and deciding
what you&amp;#8217;re allowed to do (authorization). These tasks are managed by one or more security realms.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;authentication&quot;&gt;Authentication&lt;/h4&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Authentication is the process of verifying the identity of an entity, such as a user, system, or device, to ensure
that it is who or what it claims to be. It can be done through different methods such as password based authentication,
token based authentication, certificate based… and more.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;authorization&quot;&gt;Authorization&lt;/h4&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Authorization is the process of granting or denying access permissions to authenticated users or entities.
It defines what actions or resources users are allowed to access based on their verified identity.
Authorization works alongside authentication to ensure that only authorized users can perform specific actions within a
system. Infinispan uses Role-Based Access Control (RBAC) for authorization.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;security-realms&quot;&gt;Security Realms&lt;/h4&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;A security realm is a set of policies and authentication methods governing access to a system or resource.
It establishes rules for user authentication and authorization, such as using usernames/passwords or advanced methods
like OAuth. Security realms integrate Infinispan Server deployments with the network protocols and infrastructure
in your environment that control access and verify user identities.
Infinispan integrates with Kerberos, LDAP, Trust stores… and token based authentication such as &lt;a href=&quot;https://openid.net/&quot;&gt;OpenID Connect&lt;/a&gt;
providers such as &lt;a href=&quot;https://www.keycloak.org/&quot;&gt;Keycloak&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;infinispan-server-security&quot;&gt;Infinispan Server Security&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;To truly grasp the basics, the best method is hands-on experience.
Infinispan 15.0 simplifies understanding authentication and authorization through a visual interface.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;running-the-infinispan-server-with-a-single-user&quot;&gt;Running the Infinispan Server with a single user&lt;/h4&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Start by running the Infinispan Server with a Docker or Podman container.
Make sure you have the latest version of the Infinispan Server 15.0 image by pulling it locally.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlightjs highlight&quot;&gt;&lt;code class=&quot;language-bash hljs&quot; data-lang=&quot;bash&quot;&gt;# Podman
podman run -it -p 11222:11222 -e USER=&quot;admin&quot; -e PASS=&quot;password&quot; --net=host quay.io/infinispan/server:15.0

# Docker
docker run -it -p 11222:11222 -e USER=&quot;admin&quot; -e PASS=&quot;password&quot; quay.io/infinispan/server:15.0&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;infinispan-defaults&quot;&gt;Infinispan defaults&lt;/h4&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;In Infinispan, the default security realm relies on properties.
Users are established in a local properties file on the active server.
By running the container and providing &quot;USER&quot; and &quot;PASS&quot; environment variables, the
server generates a user capable of authenticating to Infinispan and is automatically granted
the &quot;admin&quot; implicit role.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/2023-12-19-secured-caches/browser-DIGEST.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/2023-12-19-secured-caches/browser-DIGEST.png&quot; alt=&quot;Browser authentication&quot; width=&quot;800&quot; height=&quot;547&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Infinispan doesn&amp;#8217;t maintain user authentication through a session management system in the server for
its REST API. The REST API operates in a stateless manner, and authentication, as well as role-based
access control (RBAC), is facilitated through the AUTHENTICATION header when interacting
with the REST API. The console is built using the REST API. DIGEST mechanism is part
of the supported mechanism, so the browser will ask for user/password using the native browser
authentication mechanism. For security reasons, BASIC authentication is not enabled by default
unless TLS is also configured.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;implicit-rbac&quot;&gt;Implicit RBAC&lt;/h4&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Infinispan safeguards operations by specifying various permissions to operations such as creating caches,
resetting statistics, uploading data schemas, and more. A role is a set of 1 or more permissions.
Implicit authorization is enabled by default, providing predefined roles to which users can be assigned,
granting them the ability to execute specific actions.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Starting from Infinispan 15, a new feature in the console allows users to view these roles, their
corresponding permissions, and descriptions. It is now also possible to create custom roles with
specific permissions directly from the web console (previously, this capability was limited to the
Command Line Tool). However, for the purpose of this article, we will focus on utilizing the pre-existing
implicit roles.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/2023-12-19-secured-caches/implicit-ROLES.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/2023-12-19-secured-caches/implicit-ROLES.png&quot; alt=&quot;Implicit roles&quot; width=&quot;800&quot; height=&quot;394&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;running-the-server-with-multiple-users&quot;&gt;Running the server with multiple users&lt;/h4&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;To start Infinispan locally with multiple users and distinct roles, we can employ a
identities batch that is passed to the container during startup.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;1) Create a file called &lt;strong&gt;identities.batch&lt;/strong&gt; with the following content.
To simplify matters, we have established a straightforward one-to-one mapping between user
names and roles.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;&lt;strong&gt;identities.batch&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre&gt;user create &quot;admin&quot; -p &quot;password&quot; -g admin
user create &quot;observer&quot; -p &quot;password&quot; -g observer
user create &quot;monitor&quot; -p &quot;password&quot; -g monitor
user create &quot;deployer&quot; -p &quot;password&quot; -g deployer
user create &quot;application&quot; -p &quot;password&quot; -g application&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;2) Provide the file on run, by creating the user-config volume and passing the IDENTITIES_BATCH env variable.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlightjs highlight&quot;&gt;&lt;code class=&quot;language-bash hljs&quot; data-lang=&quot;bash&quot;&gt;# Podman
podman run -it -p 11222:11222 -v $(pwd):/user-config -e IDENTITIES_BATCH=&quot;/user-config/identities.batch&quot; --net=host quay.io/infinispan/server:15.0

# Docker
docker run -it -p 11222:11222 -v $(pwd):/user-config -e IDENTITIES_BATCH=&quot;/user-config/identities.batch&quot; quay.io/infinispan/server:15.0&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Those users are now available and listed in the Infinispan Web Console.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/2023-12-19-secured-caches/users-BATCH.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/2023-12-19-secured-caches/users-BATCH.png&quot; alt=&quot;Implicit roles&quot; width=&quot;724&quot; height=&quot;453&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;When connecting with the &quot;observer&quot; user, which possesses the &quot;observer&quot; role,
it becomes apparent that this user is unable to access certain actions in the console that
necessitate &quot;admin&quot; role’s permissions. Examples include creating a cache, viewing connected clients,
or accessing the access management functionalities.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/2023-12-19-secured-caches/connect-OBSERVER.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/2023-12-19-secured-caches/connect-OBSERVER.png&quot; alt=&quot;connect observer&quot; width=&quot;800&quot; height=&quot;271&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;secured-caches-in-infinispan&quot;&gt;Secured Caches in Infinispan&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;In Infinispan, it&amp;#8217;s possible to create caches with data manipulation permissions restricted
to specific roles.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;creating-a-secured-cache&quot;&gt;Creating a secured cache&lt;/h4&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;For testing purposes, connect using the credentials admin/password and click on the
“Create a cache” button in the Data Container page. In the cache creation wizard, after opting
for all the default settings, select the &quot;Authorization&quot; capability, and the &quot;admin&quot; and &quot;monitor&quot;
roles.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/2023-12-19-secured-caches/create-CACHE.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/2023-12-19-secured-caches/create-CACHE.png&quot; alt=&quot;Create Secured Cache&quot; width=&quot;800&quot; height=&quot;408&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;The final cache configuration will look like this:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;&lt;strong&gt;config.yaml&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre&gt;distributedCache:
  owners: &quot;2&quot;
  mode: &quot;SYNC&quot;
  statistics: &quot;true&quot;
  encoding:
    mediaType: &quot;application/x-protostream&quot;
  security:
    authorization:
      enabled: &quot;true&quot;
      roles:
        - &quot;admin&quot;
        - &quot;monitor&quot;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;accessing-the-secured-cache&quot;&gt;Accessing the Secured  Cache&lt;/h4&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;When using the &quot;admin&quot; user, the cache will have unrestricted access because the admin role has all the permissions. On the other hand, connecting with the &quot;monitor&quot; user, which is assigned the monitor role, the cache is visible. However, as the monitor role is designed solely for monitoring and not data creation, only data associated with the cache metrics will be accessible.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;For users lacking the admin or monitor role, accessing the cache from the console is not possible.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;a class=&quot;image&quot; href=&quot;/assets/images/blog/2023-12-19-secured-caches/secured-cache-MONITOR.png&quot;&gt;&lt;img src=&quot;/assets/images/blog/2023-12-19-secured-caches/secured-cache-MONITOR.png&quot; alt=&quot;Console: monitor connects&quot; width=&quot;800&quot; height=&quot;310&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;going-further&quot;&gt;Going further&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;In this article, you&amp;#8217;ve explored the interplay of permissions, roles, Infinispan Security,
and the fundamentals of secured caches. Beyond these, Infinispan Security management offers a
range of additional capabilities. These include features like
&lt;a href=&quot;https://infinispan.org/docs/stable/titles/security/security.html#configuring-encryption&quot;&gt;data encryption&lt;/a&gt;
and advanced security, such as providing access to an entire group of users managed by systems like LDAP.
This is achieved through a Principal Role Mapper, which establishes a connection between all these
users and a specific role.
Infinispan supports many authentication mechanisms, such as token based authentication,
which can be handled with Keycloak. Run the
&lt;a href=&quot;https://infinispan.org/tutorials/simple/simple_tutorials.html#secured_with_token_keycloak_remote-cache-tutorials&quot;&gt;simple tutorial&lt;/a&gt;
to test it.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</content><author><name>Katia Aresti</name></author><category term="tutorial" /><category term="security" /><category term="rbac" /><category term="authentication" /><summary type="html">This article shows you how to secure your Infinispan cluster, protecting both cluster management and data access in various Infinispan caches</summary></entry><entry><title type="html">Infinispan 15.0.0.Dev06</title><link href="https://infinispan.org/blog/2023/12/13/infinispan-15dev06" rel="alternate" type="text/html" title="Infinispan 15.0.0.Dev06" /><published>2023-12-13T19:00:00-05:00</published><updated>2023-12-13T19:00:00-05:00</updated><id>https://infinispan.org/blog/2023/12/13/infinispan-15.0.0.Dev06</id><content type="html" xml:base="https://infinispan.org/blog/2023/12/13/infinispan-15dev06">&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;redis-endpoint&quot;&gt;Redis endpoint&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;The Redis endpoint now implements most of the core Redis commands and data structures (strings, sets, lists, hashes and sorted sets), as well as implementing
clustering and CRC16 slots.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;knn-vector-search&quot;&gt;kNN Vector search&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Infinispan can now perform indexed kNN vector searches. See our recent &lt;a href=&quot;https://infinispan.org/blog/2023/12/13/infinispan-vector-search&quot;&gt;blog post&lt;/a&gt; for more information.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;infinispan-web-console&quot;&gt;Infinispan Web Console&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;The console has gained an access management section that lets you create, update, and delete roles, as well as assign access to principal mappers.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;graalvm-feature&quot;&gt;GraalVM feature&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;A GraalVM native-image &lt;a href=&quot;https://www.graalvm.org/sdk/javadoc/org/graalvm/nativeimage/hosted/Feature.html&quot;&gt;Feature&lt;/a&gt; is now available via the dedicated
modules &lt;code&gt;infinispan-hotrod-graalvm&lt;/code&gt; and &lt;code&gt;infinispan-embedded-graalvm&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;hibernate-orm-6-3-2lc&quot;&gt;Hibernate ORM 6.3 2LC&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Our second-level cache provider now supports Hibernate ORM 6.3.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;jcache-is-back&quot;&gt;JCache is back!&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;While working on the Jakarta migration, we temporarily removed the JCache provider because of its optional dependency on CDI conflicting with the migration to Jakarta EE.
As of 15.0.0.Dev06, the JCache component is back, albeit without the CDI integration.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;when-is-the-final-release-coming&quot;&gt;When is the Final release coming?&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;We hope to have the final release of Infinispan 15 ready for consumption by the end of the year and we will be making regular development releases.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Get them from our &lt;a href=&quot;https://infinispan.org/download/&quot;&gt;download page&lt;/a&gt;.]&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</content><author><name>Tristan Tarrant</name></author><category term="release" /><category term="development" /><summary type="html">Redis endpoint</summary></entry><entry><title type="html">Infinispan kNN Vector Search</title><link href="https://infinispan.org/blog/2023/12/13/infinispan-vector-search" rel="alternate" type="text/html" title="Infinispan kNN Vector Search" /><published>2023-12-13T14:37:00-05:00</published><updated>2023-12-13T14:37:00-05:00</updated><id>https://infinispan.org/blog/2023/12/13/infinispan-vector-search</id><content type="html" xml:base="https://infinispan.org/blog/2023/12/13/infinispan-vector-search">&lt;div id=&quot;preamble&quot;&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;With Infinispan 15.0.0.Dev06, we have started to expose vector search capabilities using Infinispan&amp;#8217;s indexed queries.
Using the newly introduced kNN predicate, it is possible to find and order results by the k nearest neighbors of a given vector.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;mapping-the-embeddings&quot;&gt;Mapping the embeddings&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;The new &lt;code&gt;@Vector&lt;/code&gt; indexing annotation is used to mark a field as an embedding. Embeddings are vector representations of data, according to a defined model.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;The vector dimension is mandatory and should be defined at mapping time.
Other options that can be specified during mapping are:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;the similarity (distance) function&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;the beam width&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;the maximum number of connections.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Bear in mind that these values affect the performance of the approximation algorithm that is used to compute the kNN search.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;We support &lt;code&gt;byte[]&lt;/code&gt; embeddings. Here is an example of mapping:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlightjs highlight&quot;&gt;&lt;code class=&quot;language-java hljs&quot; data-lang=&quot;java&quot;&gt;@Vector(dimension = 3)
@ProtoField(2)
public byte[] getByteVector() {
   return byteVector;
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;That corresponds to the Proto schema:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlightjs highlight&quot;&gt;&lt;code class=&quot;language-proto hljs&quot; data-lang=&quot;proto&quot;&gt;/**
 * @Vector(dimension=3)
 */
optional bytes byteVector = 2;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;We also support &lt;code&gt;float[]&lt;/code&gt; embeddings. Here is an example of mapping:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlightjs highlight&quot;&gt;&lt;code class=&quot;language-java hljs&quot; data-lang=&quot;java&quot;&gt;@Vector(dimension = 3)
@ProtoField(3)
public float[] getFloatVector() {
   return floatVector;
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;That corresponds to the Proto schema:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlightjs highlight&quot;&gt;&lt;code class=&quot;language-proto hljs&quot; data-lang=&quot;proto&quot;&gt;/**
 * @Vector(dimension=3)
 */
repeated float floatVector = 3;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;searching-the-embeddings&quot;&gt;Searching the embeddings&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;The following query shows how to perform a kNN search using a supplied vector and a specific distance&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlightjs highlight&quot;&gt;&lt;code class=&quot;language-sql hljs&quot; data-lang=&quot;sql&quot;&gt;from Item i where i.byteVector &amp;lt;-&amp;gt; [7,7,7]~3&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;The query can be parameterized in several ways:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlightjs highlight&quot;&gt;&lt;code class=&quot;language-java hljs&quot; data-lang=&quot;java&quot;&gt;query = cache.query(&quot;from org.infinispan.query.model.Item i where i.byteVector &amp;lt;-&amp;gt; [:a,:b,:c]~3&quot;);
query.setParameter(&quot;a&quot;, 0);
query.setParameter(&quot;b&quot;, 2);
query.setParameter(&quot;c&quot;, 3);
hits = query.list();
assertThat(hits).extracting(&quot;code&quot;).containsExactly(&quot;c2&quot;, &quot;c1&quot;, &quot;c3&quot;); // the order matters&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Or you can pass the entire vector as a single parameter:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlightjs highlight&quot;&gt;&lt;code class=&quot;language-java hljs&quot; data-lang=&quot;java&quot;&gt;query = cache.query(&quot;from org.infinispan.query.model.Item i where i.floatVector &amp;lt;-&amp;gt; [:a]~:b&quot;);
query.setParameter(&quot;a&quot;, new float[]{7.1f, 7.0f, 3.1f});
query.setParameter(&quot;b&quot;, 3);
hits = query.list();
assertThat(hits).extracting(&quot;code&quot;).containsExactly(&quot;c5&quot;, &quot;c6&quot;, &quot;c4&quot;);&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;If the cache is distributed, the query will be a broadcast query, and it will aggregate all the results from all the nodes that contain shards of the indexes that are related to the search.
When we get the result as usual we get all the metadata from the corresponding entities, so that the returning items can easily relate to the application domain.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</content><author><name>Fabio Massimo Ercoli</name></author><category term="search" /><category term="vector" /><category term="knn" /><category term="indexing" /><category term="embeddings" /><summary type="html">With Infinispan 15.0.0.Dev06, we have started to expose vector search capabilities using Infinispan&amp;#8217;s indexed queries. Using the newly introduced kNN predicate, it is possible to find and order results by the k nearest neighbors of a given vector.</summary></entry><entry><title type="html">Reviving MongoDB cache store</title><link href="https://infinispan.org/blog/2023/05/03/reviving-mongodb-cachestore" rel="alternate" type="text/html" title="Reviving MongoDB cache store" /><published>2023-05-03T20:00:00-04:00</published><updated>2023-05-03T20:00:00-04:00</updated><id>https://infinispan.org/blog/2023/05/03/reviving-mongodb-cachestore</id><content type="html" xml:base="https://infinispan.org/blog/2023/05/03/reviving-mongodb-cachestore">&lt;div id=&quot;preamble&quot;&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;After a long period of inactivity, the MongoDB store is now back to life.
It has been upgraded to work with Infinispan 15.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;reactive-mongodb-driver&quot;&gt;Reactive MongoDB driver&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Since the Infinispan cache store API is now fully reactive, the store has also been modified to use the reactive MongoDB driver.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;database-formats&quot;&gt;Database formats&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;The older MongoDB cache store worked by persisting keys and values as binary blobs.
This should be the most efficient way, but it makes it harder to inspect the documents stored in Mongo.
Therefore, the new implementation allows choosing between two formats:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;binary&lt;/code&gt;: the binary format similar to that used with the previous MongoDB store:&lt;/p&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlightjs highlight&quot;&gt;&lt;code class=&quot;language-json hljs&quot; data-lang=&quot;json&quot;&gt;[
  {
    &quot;_id&quot;: {&quot;$binary&quot;: {&quot;base64&quot;: &quot;mAEBigERCg9KDTAtNjc5LTc3NTQzLTk=&quot;, &quot;subType&quot;: &quot;00&quot;}},
    &quot;value&quot;: {&quot;$binary&quot;: {&quot;base64&quot;: &quot;mAELigFLCkmCARBib29rX3NhbXBsZS5Cb29rigEzChpUaGUgV2luZC1VcCBCaXJkIENocm9uaWNsZRjNDyISCgZIYXJ1a2kSCE11cmFrYW1p&quot;, &quot;subType&quot;: &quot;00&quot;}}
    ...
  }
]&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;structured&lt;/code&gt;: a structured BSON representation of the objects:&lt;/p&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlightjs highlight&quot;&gt;&lt;code class=&quot;language-json hljs&quot; data-lang=&quot;json&quot;&gt;[
  {
    &quot;_id&quot;: {
      &quot;_type&quot;: &quot;string&quot;,
      &quot;_value&quot;: &quot;0-679-77543-9&quot;
    },
    &quot;value&quot;: {
      &quot;_type&quot;: &quot;book_sample.Book&quot;,
      &quot;title&quot;: &quot;The Wind-Up Bird Chronicle&quot;,
      &quot;publicationYear&quot;: 1997,
      &quot;authors&quot;: [
        {
          &quot;name&quot;: &quot;Haruki&quot;,
          &quot;surname&quot;: &quot;Murakami&quot;
        }
      ]
    },
    ...
  }
]&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;expiration&quot;&gt;Expiration&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;The MongoDB store supports expiration. However, in order to ensure correctness the expired entries are removed from the database one by one, instead of using a bulk operation. Therefore, make sure this does not have a negative impact on MongoDB instances.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</content><author><name>Antonio Macrì</name></author><category term="cache store" /><category term="mongodb" /><category term="persistence" /><summary type="html">After a long period of inactivity, the MongoDB store is now back to life. It has been upgraded to work with Infinispan 15.</summary></entry><entry><title type="html">Infinispan 15.0.0.Dev01</title><link href="https://infinispan.org/blog/2023/04/23/infinispan-15dev01" rel="alternate" type="text/html" title="Infinispan 15.0.0.Dev01" /><published>2023-04-23T20:00:00-04:00</published><updated>2023-04-23T20:00:00-04:00</updated><id>https://infinispan.org/blog/2023/04/23/infinispan-15.0.0.Dev01</id><content type="html" xml:base="https://infinispan.org/blog/2023/04/23/infinispan-15dev01">&lt;div id=&quot;preamble&quot;&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Infinispan 15.0.0.Dev01 marks the beginning of a new development cycle, and there are a number of
notable changes that we are making that deserve a detailed post.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;bye-bye-java-ee-hello-jakarta-ee&quot;&gt;Bye bye, Java EE, Hello Jakarta EE&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;We&amp;#8217;ve made the decision to drop Java EE support completely and focus solely on &lt;a href=&quot;https://jakarta.ee&quot;&gt;Jakarta EE&lt;/a&gt;.
For 14.0 we provided artifacts for both, but we believe the time has come to move on. All of the leading
application servers (like &lt;a href=&quot;https://wildfly.org&quot;&gt;WildFly&lt;/a&gt; and &lt;a href=&quot;https://openliberty.io&quot;&gt;OpenLiberty&lt;/a&gt;) as well as the most
important stacks (like &lt;a href=&quot;https://quarkus.io&quot;&gt;Quarkus&lt;/a&gt; and &lt;a href=&quot;https://spring.io&quot;&gt;Spring&lt;/a&gt;) have adopted Jakarta EE, so we&amp;#8217;ve decided it was time for us to make the move too.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;jcache-changes&quot;&gt;JCache changes&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;The choice to drop Java EE directly impacts our JCache provider implementation.
The JCache API (aka JSR 107) is essentially in maintenance mode: it was never adopted by Java EE and there are a number
of obstacles (mostly legal) that prevent it from moving to Jakarta EE. We understand the need to have an implementation
agnostic caching API, so we are going to continue supporting our JCache provider, but we will drop those parts which require Java EE,
most notably the &lt;code&gt;javax.cache.annotation&lt;/code&gt; package. Hopefully a modern caching API will emerge as part of Jakarta EE.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;dropping-spring-5-spring-boot-2-support&quot;&gt;Dropping Spring 5 / Spring Boot 2 support&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Dropping Java EE also means having to drop Spring 5 and Spring Boot 2 support.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;quarkus&quot;&gt;Quarkus&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;We&amp;#8217;ve merged our Quarkus components (embedded, CLI and server) into the main repository and have upgraded them to Quarkus 3.0.
Our &lt;a href=&quot;https://quarkus.io/extensions/io.quarkus/quarkus-infinispan-client&quot;&gt;client extension&lt;/a&gt; continues to be part of the Quarkus ecosystem.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;security-manager&quot;&gt;Security Manager&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;The Java Security Manager has been &lt;a href=&quot;https://openjdk.org/jeps/411&quot;&gt;deprecated for removal&lt;/a&gt;.
It was designed mostly for sandboxing Java applets, but it was somehow (wrongly) co-opted as a way to implement similar functionality for normal
Java applications. It was slow and cumbersome, and we&amp;#8217;re glad to see it go. Luckily, the removal of SecurityManager support from Infinispan does
not affect its authentication and authorization capabilities.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;java-17-and-21&quot;&gt;Java 17 and 21&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Starting with Infinispan 15, we will baseline on JDK 17 and also offer support for JDK 21, including virtual threads.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;but-what-if-i-rely-on-javaee-spring-5-spring-boot-2-and-jcache-annotations&quot;&gt;But what if I rely on JavaEE, Spring 5, Spring Boot 2 and JCache annotations ?&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Don&amp;#8217;t worry, we have you covered for quite some time, as we will continue to support Infinispan 14.0 for quite a while, with security patches, bug fixes and
improvements that we can backport.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;other-features-and-tentative-release-date&quot;&gt;Other features and tentative release date&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;What you can expect to see in Infinispan 15:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;many improvements to our Redis-compatible &lt;a href=&quot;https://redis.io/docs/reference/protocol-spec/&quot;&gt;RESP&lt;/a&gt; endpoint, including many more commands&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;a completely overhauled &lt;a href=&quot;https://memcached.org/&quot;&gt;Memcached&lt;/a&gt; endpoint with support for authentication and the binary protocol&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;improved performance across the board, with particular focus on the remote endpoints and clustering&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;CDC integration, courtesy of our friends over at &lt;a href=&quot;https://debezium.io/&quot;&gt;Debezium&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Much more!&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;We hope to have the final release of Infinispan 15 ready for consumption by the end of the year and we will be making regular development releases.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect1&quot;&gt;
&lt;h2 id=&quot;release-notes&quot;&gt;Release notes&lt;/h2&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div class=&quot;sect2&quot;&gt;
&lt;h3 id=&quot;sub-task&quot;&gt;Sub-task&lt;/h3&gt;
&lt;div class=&quot;literalblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre&gt;https://issues.redhat.com/browse/ISPN-12152[ISPN-12152] - Remove the Kryo and Protostuff Marshallers
https://issues.redhat.com/browse/ISPN-13985[ISPN-13985] - Test AsyncCache new API.
https://issues.redhat.com/browse/ISPN-13994[ISPN-13994] - Pass added SerialAllowList to configuration
https://issues.redhat.com/browse/ISPN-14016[ISPN-14016] - Implement HotRodMutinyCaches methods&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect2&quot;&gt;
&lt;h3 id=&quot;feature-request&quot;&gt;Feature Request&lt;/h3&gt;
&lt;div class=&quot;literalblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre&gt;https://issues.redhat.com/browse/ISPN-12081[ISPN-12081] - Weak counter creation
https://issues.redhat.com/browse/ISPN-13424[ISPN-13424] - Spring 6 integration
https://issues.redhat.com/browse/ISPN-13946[ISPN-13946] - Expose indexes metamodel
https://issues.redhat.com/browse/ISPN-14085[ISPN-14085] - Allow to pass new list of indexed entities in update schema API
https://issues.redhat.com/browse/ISPN-14233[ISPN-14233] - REST API makes it possible to download any server report
https://issues.redhat.com/browse/ISPN-14298[ISPN-14298] - Delete a counter
https://issues.redhat.com/browse/ISPN-14300[ISPN-14300] - Add a delta in a value
https://issues.redhat.com/browse/ISPN-14303[ISPN-14303] - Reset counter
https://issues.redhat.com/browse/ISPN-14309[ISPN-14309] - Improve Counters Table Filtering
https://issues.redhat.com/browse/ISPN-14344[ISPN-14344] - StoreMigrator support reading segmented SingleFileStores
https://issues.redhat.com/browse/ISPN-14361[ISPN-14361] - Create Hibernate 2LC implementation for Hibernate 6.2.x.
https://issues.redhat.com/browse/ISPN-14577[ISPN-14577] - Running tests with alternate JDK
https://issues.redhat.com/browse/ISPN-14731[ISPN-14731] - Hot Rod client should support alternate resolution strategies
https://issues.redhat.com/browse/ISPN-14758[ISPN-14758] - Add cli command alternative to /rest/v2/caches/{cacheName}/{cacheKey}?extended endpoint&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect2&quot;&gt;
&lt;h3 id=&quot;bug&quot;&gt;Bug&lt;/h3&gt;
&lt;div class=&quot;literalblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre&gt;https://issues.redhat.com/browse/ISPN-12224[ISPN-12224] - Cluster in a confusing state after restarted from graceful shutdown - no hint for waiting on complete restarted
https://issues.redhat.com/browse/ISPN-13877[ISPN-13877] - NullPointerException in MetricsCollector.java
https://issues.redhat.com/browse/ISPN-14090[ISPN-14090] - Counters client 14 are incompatible with Server 13
https://issues.redhat.com/browse/ISPN-14112[ISPN-14112] - REST/CLI command will add a schema definition with &apos;upload&apos; if the given file does not exists
https://issues.redhat.com/browse/ISPN-14119[ISPN-14119] - Cache details page: Queries give error in case of running after entries expiration
https://issues.redhat.com/browse/ISPN-14210[ISPN-14210] - Stores that do not return the EXPIRATION Characteristic should not allow expiration
https://issues.redhat.com/browse/ISPN-14238[ISPN-14238] - Memcached server: corrupted response
https://issues.redhat.com/browse/ISPN-14240[ISPN-14240] - Client certificate authentication doesn&apos;t work with HTTP/2
https://issues.redhat.com/browse/ISPN-14256[ISPN-14256] - CLI expands `-` filename breaking stdin batch
https://issues.redhat.com/browse/ISPN-14264[ISPN-14264] - [Console] Counters page - double click on Strong/Weak select loads all counters
https://issues.redhat.com/browse/ISPN-14271[ISPN-14271] - Cache wizard back button not working
https://issues.redhat.com/browse/ISPN-14278[ISPN-14278] - [Doc] sql-store examples should be updated
https://issues.redhat.com/browse/ISPN-14279[ISPN-14279] - &quot;Divide by 0&quot;-Exception on Cache.getStats()
https://issues.redhat.com/browse/ISPN-14280[ISPN-14280] - JSON parser doesn&apos;t report error locations correctly
https://issues.redhat.com/browse/ISPN-14282[ISPN-14282] - Spring Boot actuator embedded metrics use deprecated code
https://issues.redhat.com/browse/ISPN-14290[ISPN-14290] - [Docs] YAML Configuration example with typos
https://issues.redhat.com/browse/ISPN-14313[ISPN-14313] - Set different properties and port for cross-site testdriver
https://issues.redhat.com/browse/ISPN-14315[ISPN-14315] - Not possible to get server config over REST
https://issues.redhat.com/browse/ISPN-14316[ISPN-14316] - &apos;/rest/v2/server/report&apos; throws exception if there are 1+ instances on the host
https://issues.redhat.com/browse/ISPN-14317[ISPN-14317] - Not possible to create cluster backup over REST
https://issues.redhat.com/browse/ISPN-14319[ISPN-14319] - Use InetSocketAddress.getHostString() instead of getHostName()
https://issues.redhat.com/browse/ISPN-14323[ISPN-14323] - Get command blocks in text/plain caches
https://issues.redhat.com/browse/ISPN-14329[ISPN-14329] - Availability of caches should be prevented until a cluster is complete after &quot;shutdown cluster&quot;
https://issues.redhat.com/browse/ISPN-14348[ISPN-14348] - BytesObjectOutput.writeUTF performance improvements
https://issues.redhat.com/browse/ISPN-14356[ISPN-14356] - NPE if not configuring datasource connection pool maxSize
https://issues.redhat.com/browse/ISPN-14362[ISPN-14362] - Json escape should use two equality checks instead of HashMap lookup
https://issues.redhat.com/browse/ISPN-14364[ISPN-14364] - Yaml parser mishandles lists
https://issues.redhat.com/browse/ISPN-14368[ISPN-14368] - CacheInputEntryStream escapes the value for every byte in the value
https://issues.redhat.com/browse/ISPN-14376[ISPN-14376] - Web console crashes when cache name has a dot
https://issues.redhat.com/browse/ISPN-14377[ISPN-14377] - Stats command inaccurate results
https://issues.redhat.com/browse/ISPN-14390[ISPN-14390] - When reading entries from read only store apply expiration
https://issues.redhat.com/browse/ISPN-14399[ISPN-14399] - Do not allow read only and passivation to be configured together
https://issues.redhat.com/browse/ISPN-14406[ISPN-14406] - Stage returned from reindexing on explicit keys completes earlier than expected
https://issues.redhat.com/browse/ISPN-14416[ISPN-14416] - Data Distribution chart size issue
https://issues.redhat.com/browse/ISPN-14417[ISPN-14417] - The metrics for misses and retrievals are updated after page reload
https://issues.redhat.com/browse/ISPN-14421[ISPN-14421] - CVE-2022-41881 codec-haproxy: HAProxyMessageDecoder Stack Exhaustion DoS [jdg-8]
https://issues.redhat.com/browse/ISPN-14435[ISPN-14435] - Backwards compatibility broken with InvalidMagicIdException
https://issues.redhat.com/browse/ISPN-14440[ISPN-14440] - calling AsyncCache#keys or MutinyCache#keys throws an exception because the ToEmptyBytesKeyValueFilterConverter cannot be found.
https://issues.redhat.com/browse/ISPN-14453[ISPN-14453] - Ickl Queries should support BigInteger and BigDecimal
https://issues.redhat.com/browse/ISPN-14461[ISPN-14461] - Add missing licence: MPL-1.1
https://issues.redhat.com/browse/ISPN-14466[ISPN-14466] - Cache configuration update failure cause not returned in http body
https://issues.redhat.com/browse/ISPN-14468[ISPN-14468] - REST: return error if failed to create counter
https://issues.redhat.com/browse/ISPN-14470[ISPN-14470] - REST cache configuration comparison returns 204 for different caches
https://issues.redhat.com/browse/ISPN-14477[ISPN-14477] - Concurrent Spring session access results in lost session attributes
https://issues.redhat.com/browse/ISPN-14479[ISPN-14479] - SQL Cache store initiation fails on Sql type CHAR
https://issues.redhat.com/browse/ISPN-14491[ISPN-14491] - Adding entries with putAll does not add metadata version - following replaceWithVersion will end with a timout
https://issues.redhat.com/browse/ISPN-14510[ISPN-14510] - org.infinispan.server.cli.CliIT.testCliInteractive failure
https://issues.redhat.com/browse/ISPN-14511[ISPN-14511] - RestOperations.testCounter[HTTP_20] failure
https://issues.redhat.com/browse/ISPN-14512[ISPN-14512] - Fix *-jakarta modules
https://issues.redhat.com/browse/ISPN-14516[ISPN-14516] - Wrong versions in spring-boot-3-tests module
https://issues.redhat.com/browse/ISPN-14527[ISPN-14527] - Meta model may not reflect some schema changes
https://issues.redhat.com/browse/ISPN-14535[ISPN-14535] - GetCounterNameOperation can fail replay
https://issues.redhat.com/browse/ISPN-14540[ISPN-14540] - [Docs]Fix JSON example for Off-heap storage
https://issues.redhat.com/browse/ISPN-14542[ISPN-14542] - AsyncStore needs to use SecurityAction when retrieving ComponentRegistry
https://issues.redhat.com/browse/ISPN-14543[ISPN-14543] - Build resource filtering corrupts binary files
https://issues.redhat.com/browse/ISPN-14544[ISPN-14544] - RESP endpoint cache shouldn&apos;t require no expiration configured
https://issues.redhat.com/browse/ISPN-14545[ISPN-14545] - SIFS Compactor does not properly shut down but the index thinks it is okay
https://issues.redhat.com/browse/ISPN-14569[ISPN-14569] - Protocol parser throws a NPE if all branches of a switch statement or if/else contain a throw clause
https://issues.redhat.com/browse/ISPN-14573[ISPN-14573] - AbstractAuthorization.testRestServerNodeReport is failing
https://issues.redhat.com/browse/ISPN-14574[ISPN-14574] - [CLI] ClassCastException with get clusters -s option
https://issues.redhat.com/browse/ISPN-14578[ISPN-14578] - We should never be using CompletableFuture.completionStage
https://issues.redhat.com/browse/ISPN-14579[ISPN-14579] - Various RESP commands are requesting wrong size for buffer
https://issues.redhat.com/browse/ISPN-14580[ISPN-14580] - We should use voidPromise for all context writes that don&apos;t use a future
https://issues.redhat.com/browse/ISPN-14583[ISPN-14583] - RESP endpoint should bundle flush calls to allow pipelining
https://issues.redhat.com/browse/ISPN-14589[ISPN-14589] - JdbcStringBasedCacheStorePassivation.testFailoverWithPassivation failures
https://issues.redhat.com/browse/ISPN-14683[ISPN-14683] - NPE in configuration reader if resolver is null
https://issues.redhat.com/browse/ISPN-14685[ISPN-14685] - EncodingConfiguration matching is too strict
https://issues.redhat.com/browse/ISPN-14687[ISPN-14687] - Detect circular references on marshalling
https://issues.redhat.com/browse/ISPN-14691[ISPN-14691] - Fix Authorization error in Actuator Metrics Binding
https://issues.redhat.com/browse/ISPN-14730[ISPN-14730] - Exclude completely the non jakarta commons dependency
https://issues.redhat.com/browse/ISPN-14732[ISPN-14732] - ClasspathURLStreamHandlerProvider should throw FileNotFoundException if it cannot find a resource
https://issues.redhat.com/browse/ISPN-14733[ISPN-14733] - Make quarkus modules inherit from Infinispan parent
https://issues.redhat.com/browse/ISPN-14737[ISPN-14737] - SoftIndexFileStore Index can become corrupted
https://issues.redhat.com/browse/ISPN-14738[ISPN-14738] - RESP endpoint commands don&apos;t require previous value
https://issues.redhat.com/browse/ISPN-14739[ISPN-14739] - OffHeapConcurrentMap shouldn&apos;t require reading previous value on put
https://issues.redhat.com/browse/ISPN-14744[ISPN-14744] - RemoteCacheManagerAdmin docs should mention supported config formats
https://issues.redhat.com/browse/ISPN-14753[ISPN-14753] - Prevent SoftIndexFileStore Compactor from running multiple times
https://issues.redhat.com/browse/ISPN-14755[ISPN-14755] - Empty authorization roles serialized as JSON cannot be parsed
https://issues.redhat.com/browse/ISPN-14759[ISPN-14759] - SoftIndexFileStore Index can lag behind LogAppender under heavy load
https://issues.redhat.com/browse/ISPN-14763[ISPN-14763] - Users unable to configure StoreMigrator marshaller allow-list via properties
https://issues.redhat.com/browse/ISPN-14767[ISPN-14767] - CLI table printer breaks when values have line breaks&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect2&quot;&gt;
&lt;h3 id=&quot;task&quot;&gt;Task&lt;/h3&gt;
&lt;div class=&quot;literalblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre&gt;https://issues.redhat.com/browse/ISPN-11701[ISPN-11701] - Add store migration capabilities to the CLI
https://issues.redhat.com/browse/ISPN-14263[ISPN-14263] - Restrict most JGroupsTransport INFO logging when using a ForkChannel.
https://issues.redhat.com/browse/ISPN-14287[ISPN-14287] - Remove extended-statistics module
https://issues.redhat.com/browse/ISPN-14288[ISPN-14288] - Remove kryo and protostuff marshallers
https://issues.redhat.com/browse/ISPN-14375[ISPN-14375] - Remove all uses of SecurityManager/AccessControlContext
https://issues.redhat.com/browse/ISPN-14414[ISPN-14414] - REST API retrieve caches in initializing state
https://issues.redhat.com/browse/ISPN-14424[ISPN-14424] - [Docs] Fix errors in the REST guide
https://issues.redhat.com/browse/ISPN-14426[ISPN-14426] - Disable tracing propagation on HotRod client using a system property
https://issues.redhat.com/browse/ISPN-14492[ISPN-14492] - Build Infinispan with JDK 17
https://issues.redhat.com/browse/ISPN-14541[ISPN-14541] - [Docs] Use Java serialization or JBoss Marshalling with cyclic objects
https://issues.redhat.com/browse/ISPN-14575[ISPN-14575] - Remove properties attribute from indexing configuration
https://issues.redhat.com/browse/ISPN-14591[ISPN-14591] - Add exception to the BlockHound for the registering of a proto file
https://issues.redhat.com/browse/ISPN-14705[ISPN-14705] - Expose indexing failures statistics using Infinispan indexing failure handler
https://issues.redhat.com/browse/ISPN-14713[ISPN-14713] - Include new api dependency in Spring Boot 3 modules
https://issues.redhat.com/browse/ISPN-14742[ISPN-14742] - Remove GeronimoTransactionManager
https://issues.redhat.com/browse/ISPN-14756[ISPN-14756] - Remove JCache support
https://issues.redhat.com/browse/ISPN-14769[ISPN-14769] - Replace completedExceptionFuture with failedFuture
https://issues.redhat.com/browse/ISPN-14771[ISPN-14771] - Change PrivateMetadata in OffHeap to use a flag for presence instead of 4 bytes for length
https://issues.redhat.com/browse/ISPN-14786[ISPN-14786] - Remove Wildfly modules
https://issues.redhat.com/browse/ISPN-14787[ISPN-14787] - Remove Spring5 and Spring Boot 2 support
https://issues.redhat.com/browse/ISPN-14789[ISPN-14789] - Fix port number in exam,ples of property files in SB starter docs
https://issues.redhat.com/browse/ISPN-14792[ISPN-14792] - Remove Security Integration tests with WildFly&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect2&quot;&gt;
&lt;h3 id=&quot;component-upgrade&quot;&gt;Component Upgrade&lt;/h3&gt;
&lt;div class=&quot;literalblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre&gt;https://issues.redhat.com/browse/ISPN-14270[ISPN-14270] - Update to Spring Boot 3
https://issues.redhat.com/browse/ISPN-14320[ISPN-14320] - Update Patternfly to 2022.14 Release
https://issues.redhat.com/browse/ISPN-14342[ISPN-14342] - Apache SSHD 2.9.2
https://issues.redhat.com/browse/ISPN-14343[ISPN-14343] - Jackson 2.14.1
https://issues.redhat.com/browse/ISPN-14346[ISPN-14346] - Upgrade JGroups to 5.2.10.Final
https://issues.redhat.com/browse/ISPN-14365[ISPN-14365] - JBoss Marshalling 2.1.1
https://issues.redhat.com/browse/ISPN-14372[ISPN-14372] - Update Patternfly to 2022.15 Release
https://issues.redhat.com/browse/ISPN-14401[ISPN-14401] - Protostream 4.6.0.Final
https://issues.redhat.com/browse/ISPN-14437[ISPN-14437] - Update XStream to 1.4.20 to fix CVEs
https://issues.redhat.com/browse/ISPN-14442[ISPN-14442] - Update to 2.19.0 log4j
https://issues.redhat.com/browse/ISPN-14444[ISPN-14444] - Update Patternfly to 2022.16 Release
https://issues.redhat.com/browse/ISPN-14448[ISPN-14448] - Surefire 3.0.0-M8
https://issues.redhat.com/browse/ISPN-14462[ISPN-14462] - Upgrade assertj-core to 3.24.1
https://issues.redhat.com/browse/ISPN-14476[ISPN-14476] - Bump JGroups to 5.2.12.Final
https://issues.redhat.com/browse/ISPN-14513[ISPN-14513] - Upgrade Narayana to 5.13.1.Final
https://issues.redhat.com/browse/ISPN-14523[ISPN-14523] - Log4j 2.20.0
https://issues.redhat.com/browse/ISPN-14525[ISPN-14525] - Elytron 2.1.0.Final
https://issues.redhat.com/browse/ISPN-14550[ISPN-14550] - Upgrade Patternfly Dependencies to Release 2023.01 (2023-02-02)
https://issues.redhat.com/browse/ISPN-14553[ISPN-14553] - Spring and Spring Boot dependencies
https://issues.redhat.com/browse/ISPN-14681[ISPN-14681] - Surefire 3.0.0
https://issues.redhat.com/browse/ISPN-14694[ISPN-14694] - Upgrade Patternfly Dependencies to Release 2023.02 (2023-03-24)
https://issues.redhat.com/browse/ISPN-14711[ISPN-14711] - Updates latests SB 3 and 2
https://issues.redhat.com/browse/ISPN-14734[ISPN-14734] - Quarkus 3.0.0.CR2
https://issues.redhat.com/browse/ISPN-14745[ISPN-14745] - Narayana 6.0.0.Final
https://issues.redhat.com/browse/ISPN-14746[ISPN-14746] - Fabric8 kubernetes-client 6.5.1
https://issues.redhat.com/browse/ISPN-14747[ISPN-14747] - jboss-threads 3.5.0.Final
https://issues.redhat.com/browse/ISPN-14764[ISPN-14764] - Upgrade to plexus-utils 3.5.1&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Enhancement&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;literalblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre&gt;https://issues.redhat.com/browse/ISPN-12106[ISPN-12106] - Add a refresh button in the cache detail
https://issues.redhat.com/browse/ISPN-12223[ISPN-12223] - Confusing behaviour in case of joining nodes if a partition is DEGRADED
https://issues.redhat.com/browse/ISPN-12484[ISPN-12484] - Explicit Locks should throw AvailabilityException during ClusterPartition instead of Timeouts
https://issues.redhat.com/browse/ISPN-14092[ISPN-14092] - Cache Configuration Wizard Direct Link
https://issues.redhat.com/browse/ISPN-14142[ISPN-14142] - Transport: add option to skip flow control
https://issues.redhat.com/browse/ISPN-14204[ISPN-14204] - Standardize NYC and LON for XSite tests
https://issues.redhat.com/browse/ISPN-14205[ISPN-14205] - InfinispanGenericContainer::getNetworkIpAddress fail fast if container is not running
https://issues.redhat.com/browse/ISPN-14213[ISPN-14213] - [Docs]: Add a statement why we provide no performance numbers
https://issues.redhat.com/browse/ISPN-14223[ISPN-14223] - Create Redis cache on first access
https://issues.redhat.com/browse/ISPN-14244[ISPN-14244] - Don&apos;t pretty print XML/JSON by default
https://issues.redhat.com/browse/ISPN-14246[ISPN-14246] - Query Statistics Tooltip
https://issues.redhat.com/browse/ISPN-14247[ISPN-14247] - Drop snakeyaml dependency
https://issues.redhat.com/browse/ISPN-14259[ISPN-14259] - Support benchmark CLI as a batch command
https://issues.redhat.com/browse/ISPN-14322[ISPN-14322] - Number of owners is 2 by default
https://issues.redhat.com/browse/ISPN-14327[ISPN-14327] - Overlays should be able to replace endpoint configuration
https://issues.redhat.com/browse/ISPN-14341[ISPN-14341] - Allow injecting a MeterRegistry instance into Infinispan
https://issues.redhat.com/browse/ISPN-14374[ISPN-14374] - Env variable for max_site_masters
https://issues.redhat.com/browse/ISPN-14394[ISPN-14394] - Cache Configuration Wizard indexing startup mode
https://issues.redhat.com/browse/ISPN-14415[ISPN-14415] - Expose REST endpoint to compare two cache configurations
https://issues.redhat.com/browse/ISPN-14423[ISPN-14423] - Improve configuration parser error reporting
https://issues.redhat.com/browse/ISPN-14451[ISPN-14451] - Set Hot Rod protocol version to AUTO via properties
https://issues.redhat.com/browse/ISPN-14456[ISPN-14456] - Validation for delta (counter)
https://issues.redhat.com/browse/ISPN-14467[ISPN-14467] - Suppressed exceptions should be sent over the wire
https://issues.redhat.com/browse/ISPN-14472[ISPN-14472] - Maven Shade 3.4.1
https://issues.redhat.com/browse/ISPN-14473[ISPN-14473] - Improve REST API error reporting
https://issues.redhat.com/browse/ISPN-14474[ISPN-14474] - Add a transcoder for &apos;application/x-www-form-urlencoded&apos;
https://issues.redhat.com/browse/ISPN-14482[ISPN-14482] - Provide a single executor for all caches to execute indexing commands
https://issues.redhat.com/browse/ISPN-14490[ISPN-14490] - Add blocking scheduled tasks to BlockingManager
https://issues.redhat.com/browse/ISPN-14507[ISPN-14507] - [docs] REST updates
https://issues.redhat.com/browse/ISPN-14517[ISPN-14517] - Generate test certificates from code
https://issues.redhat.com/browse/ISPN-14528[ISPN-14528] - Configuration conversion should support templates
https://issues.redhat.com/browse/ISPN-14552[ISPN-14552] - Statistics reset REST API
https://issues.redhat.com/browse/ISPN-14570[ISPN-14570] - Protocol Parser should allow for code to be provided before the decode is invoked
https://issues.redhat.com/browse/ISPN-14585[ISPN-14585] - Convert RESP endpoint to use parser generator
https://issues.redhat.com/browse/ISPN-14680[ISPN-14680] - Reuse image in Server testsuite
https://issues.redhat.com/browse/ISPN-14689[ISPN-14689] - Handle RESP SET optional arguments
https://issues.redhat.com/browse/ISPN-14690[ISPN-14690] - Rework virtual thread detection and make it optional
https://issues.redhat.com/browse/ISPN-14720[ISPN-14720] - RESP endpoint should be able to parse commands as enum
https://issues.redhat.com/browse/ISPN-14722[ISPN-14722] - Expose auto/manual indexing mode
https://issues.redhat.com/browse/ISPN-14723[ISPN-14723] - Allow to configure index sharding
https://issues.redhat.com/browse/ISPN-14724[ISPN-14724] - Create a simple DSL to build Protocol Buffers schema
https://issues.redhat.com/browse/ISPN-14735[ISPN-14735] - Move to JakartaEE packages
https://issues.redhat.com/browse/ISPN-14761[ISPN-14761] - Add marshalling info in the entries tab for not protostream
https://issues.redhat.com/browse/ISPN-14765[ISPN-14765] - Java serialization to JSON transcoder
https://issues.redhat.com/browse/ISPN-14784[ISPN-14784] - Build with JDK 21&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;Get them from our &lt;a href=&quot;https://infinispan.org/download/&quot;&gt;download page&lt;/a&gt;.]&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</content><author><name>Tristan Tarrant</name></author><category term="release" /><category term="development" /><summary type="html">Infinispan 15.0.0.Dev01 marks the beginning of a new development cycle, and there are a number of notable changes that we are making that deserve a detailed post.</summary></entry></feed>